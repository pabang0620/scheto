<!DOCTYPE html>
<html>
<head>
    <title>Schedule Modal Debug Test</title>
</head>
<body>
    <h1>Testing Employee Schedule Modal API Calls</h1>
    <p>Open browser console and network tab, then click buttons below:</p>
    
    <button onclick="openModal(1)">Open Modal for Employee 1</button>
    <button onclick="openModal(2)">Open Modal for Employee 2</button>
    <button onclick="openModal(3)">Open Modal for Employee 3</button>
    
    <div id="log"></div>

    <script>
        // Override fetch to log all API calls
        const originalFetch = window.fetch;
        let callCount = 0;
        
        window.fetch = function(...args) {
            callCount++;
            const url = args[0];
            const logDiv = document.getElementById('log');
            const logEntry = document.createElement('div');
            logEntry.style.marginBottom = '10px';
            logEntry.style.padding = '10px';
            logEntry.style.border = '1px solid #ccc';
            
            const timestamp = new Date().toISOString();
            
            // Check if it's a schedule-related call
            if (url.includes('/schedules')) {
                logEntry.style.backgroundColor = url.includes('/employees/') ? '#d4f4dd' : '#ffd4d4';
                logEntry.innerHTML = `
                    <strong>Call #${callCount} at ${timestamp}</strong><br>
                    URL: <code>${url}</code><br>
                    Type: ${url.includes('/employees/') ? '✅ CORRECT (Employee-specific)' : '❌ WRONG (All schedules)'}
                `;
            } else {
                logEntry.style.backgroundColor = '#f0f0f0';
                logEntry.innerHTML = `
                    <strong>Call #${callCount} at ${timestamp}</strong><br>
                    URL: <code>${url}</code>
                `;
            }
            
            logDiv.insertBefore(logEntry, logDiv.firstChild);
            
            console.log(`[FETCH #${callCount}]`, url, args[1]);
            
            return originalFetch.apply(this, args);
        };
        
        function openModal(employeeId) {
            // Clear previous logs
            document.getElementById('log').innerHTML = '<h3>API Calls Log:</h3>';
            callCount = 0;
            
            // Simulate modal opening
            alert(`Please now:\n1. Go to the actual app\n2. Click on Employee ${employeeId}\n3. Click on the Schedule tab\n4. Come back here to see the logged calls`);
        }
        
        console.log('Test page loaded. Fetch interceptor installed.');
        console.log('Open the actual app in another tab and test the employee modal.');
    </script>
</body>
</html>